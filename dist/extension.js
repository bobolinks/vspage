/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e={825:e=>{"use strict";function t(e){return Buffer.from(e,"base64").toString("binary")}e.exports=t.atob=t},487:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},12:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],o=0;o<4;o++)8*r+6*o<=8*e.length?n.push(t.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}},e.exports=n},57:(e,t,n)=>{t.parse=n(951),t.stringify=n(980)},951:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function n(e){return e?e.replace(/^\s+|\s+$/g,""):""}function r(e,t){var n=e&&"string"==typeof e.type,i=n?e:t;for(var o in e){var s=e[o];Array.isArray(s)?s.forEach((function(e){r(e,i)})):s&&"object"==typeof s&&r(s,i)}return n&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}e.exports=function(e,i){i=i||{};var o=1,s=1;function a(e){var t=e.match(/\n/g);t&&(o+=t.length);var n=e.lastIndexOf("\n");s=~n?e.length-n:s+e.length}function u(){var e={line:o,column:s};return function(t){return t.position=new l(e),m(),t}}function l(e){this.start=e,this.end={line:o,column:s},this.source=i.source}l.prototype.content=e;var c=[];function p(t){var n=new Error(i.source+":"+o+":"+s+": "+t);if(n.reason=t,n.filename=i.source,n.line=o,n.column=s,n.source=e,!i.silent)throw n;c.push(n)}function h(){return g(/^{\s*/)}function f(){return g(/^}/)}function d(){var t,n,r,i=[];for(m(),v(i);e.length&&"}"!=e.charAt(0)&&(t=M()||(n=void 0,r=void 0,n=u(),(r=_())?(v(),n({type:"rule",selectors:r,declarations:x()})):p("selector missing")));)!1!==t&&(i.push(t),v(i));return i}function g(t){var n=t.exec(e);if(n){var r=n[0];return a(r),e=e.slice(r.length),n}}function m(){g(/^\s*/)}function v(e){var t;for(e=e||[];t=y();)!1!==t&&e.push(t);return e}function y(){var t=u();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;""!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,""===e.charAt(n-1))return p("End of comment missing");var r=e.slice(2,n-2);return s+=2,a(r),e=e.slice(n),s+=2,t({type:"comment",comment:r})}}function _(){var e=g(/^([^{]+)/);if(e)return n(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(e){return e.replace(/,/g,"‌")})).split(/\s*(?![^(]*\)),\s*/).map((function(e){return e.replace(/\u200C/g,",")}))}function w(){var e=u(),r=g(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(r){if(r=n(r[0]),!g(/^:\s*/))return p("property missing ':'");var i=g(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),o=e({type:"declaration",property:r.replace(t,""),value:i?n(i[0]).replace(t,""):""});return g(/^[;\s]*/),o}}function x(){var e,t=[];if(!h())return p("missing '{'");for(v(t);e=w();)!1!==e&&(t.push(e),v(t));return f()?t:p("missing '}'")}function b(){for(var e,t=[],n=u();e=g(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),g(/^,\s*/);if(t.length)return n({type:"keyframe",values:t,declarations:x()})}var C,S=$("import"),A=$("charset"),O=$("namespace");function $(e){var t=new RegExp("^@"+e+"\\s*([^;]+);");return function(){var n=u(),r=g(t);if(r){var i={type:e};return i[e]=r[1].trim(),n(i)}}}function M(){if("@"==e[0])return function(){var e=u();if(t=g(/^@([-\w]+)?keyframes\s*/)){var t,n=t[1];if(!(t=g(/^([-\w]+)\s*/)))return p("@keyframes missing name");var r,i=t[1];if(!h())return p("@keyframes missing '{'");for(var o=v();r=b();)o.push(r),o=o.concat(v());return f()?e({type:"keyframes",name:i,vendor:n,keyframes:o}):p("@keyframes missing '}'")}}()||function(){var e=u(),t=g(/^@media *([^{]+)/);if(t){var r=n(t[1]);if(!h())return p("@media missing '{'");var i=v().concat(d());return f()?e({type:"media",media:r,rules:i}):p("@media missing '}'")}}()||function(){var e=u(),t=g(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return e({type:"custom-media",name:n(t[1]),media:n(t[2])})}()||function(){var e=u(),t=g(/^@supports *([^{]+)/);if(t){var r=n(t[1]);if(!h())return p("@supports missing '{'");var i=v().concat(d());return f()?e({type:"supports",supports:r,rules:i}):p("@supports missing '}'")}}()||S()||A()||O()||function(){var e=u(),t=g(/^@([-\w]+)?document *([^{]+)/);if(t){var r=n(t[1]),i=n(t[2]);if(!h())return p("@document missing '{'");var o=v().concat(d());return f()?e({type:"document",document:i,vendor:r,rules:o}):p("@document missing '}'")}}()||function(){var e=u();if(g(/^@page */)){var t=_()||[];if(!h())return p("@page missing '{'");for(var n,r=v();n=w();)r.push(n),r=r.concat(v());return f()?e({type:"page",selectors:t,declarations:r}):p("@page missing '}'")}}()||function(){var e=u();if(g(/^@host\s*/)){if(!h())return p("@host missing '{'");var t=v().concat(d());return f()?e({type:"host",rules:t}):p("@host missing '}'")}}()||function(){var e=u();if(g(/^@font-face\s*/)){if(!h())return p("@font-face missing '{'");for(var t,n=v();t=w();)n.push(t),n=n.concat(v());return f()?e({type:"font-face",declarations:n}):p("@font-face missing '}'")}}()}return r((C=d(),{type:"stylesheet",stylesheet:{source:i.source,rules:C,parsingErrors:c}}))}},146:e=>{function t(e){this.options=e||{}}e.exports=t,t.prototype.emit=function(e){return e},t.prototype.visit=function(e){return this[e.type](e)},t.prototype.mapVisit=function(e,t){var n="";t=t||"";for(var r=0,i=e.length;r<i;r++)n+=this.visit(e[r]),t&&r<i-1&&(n+=this.emit(t));return n}},78:(e,t,n)=>{var r=n(146),i=n(378);function o(e){r.call(this,e)}e.exports=o,i(o,r),o.prototype.compile=function(e){return e.stylesheet.rules.map(this.visit,this).join("")},o.prototype.comment=function(e){return this.emit("",e.position)},o.prototype.import=function(e){return this.emit("@import "+e.import+";",e.position)},o.prototype.media=function(e){return this.emit("@media "+e.media,e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")},o.prototype.document=function(e){var t="@"+(e.vendor||"")+"document "+e.document;return this.emit(t,e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")},o.prototype.charset=function(e){return this.emit("@charset "+e.charset+";",e.position)},o.prototype.namespace=function(e){return this.emit("@namespace "+e.namespace+";",e.position)},o.prototype.supports=function(e){return this.emit("@supports "+e.supports,e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")},o.prototype.keyframes=function(e){return this.emit("@"+(e.vendor||"")+"keyframes "+e.name,e.position)+this.emit("{")+this.mapVisit(e.keyframes)+this.emit("}")},o.prototype.keyframe=function(e){var t=e.declarations;return this.emit(e.values.join(","),e.position)+this.emit("{")+this.mapVisit(t)+this.emit("}")},o.prototype.page=function(e){var t=e.selectors.length?e.selectors.join(", "):"";return this.emit("@page "+t,e.position)+this.emit("{")+this.mapVisit(e.declarations)+this.emit("}")},o.prototype["font-face"]=function(e){return this.emit("@font-face",e.position)+this.emit("{")+this.mapVisit(e.declarations)+this.emit("}")},o.prototype.host=function(e){return this.emit("@host",e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")},o.prototype["custom-media"]=function(e){return this.emit("@custom-media "+e.name+" "+e.media+";",e.position)},o.prototype.rule=function(e){var t=e.declarations;return t.length?this.emit(e.selectors.join(","),e.position)+this.emit("{")+this.mapVisit(t)+this.emit("}"):""},o.prototype.declaration=function(e){return this.emit(e.property+":"+e.value,e.position)+this.emit(";")}},483:(e,t,n)=>{var r=n(146),i=n(378);function o(e){e=e||{},r.call(this,e),this.indentation=e.indent}e.exports=o,i(o,r),o.prototype.compile=function(e){return this.stylesheet(e)},o.prototype.stylesheet=function(e){return this.mapVisit(e.stylesheet.rules,"\n\n")},o.prototype.comment=function(e){return this.emit(this.indent()+"/*"+e.comment+"*/",e.position)},o.prototype.import=function(e){return this.emit("@import "+e.import+";",e.position)},o.prototype.media=function(e){return this.emit("@media "+e.media,e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},o.prototype.document=function(e){var t="@"+(e.vendor||"")+"document "+e.document;return this.emit(t,e.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},o.prototype.charset=function(e){return this.emit("@charset "+e.charset+";",e.position)},o.prototype.namespace=function(e){return this.emit("@namespace "+e.namespace+";",e.position)},o.prototype.supports=function(e){return this.emit("@supports "+e.supports,e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},o.prototype.keyframes=function(e){return this.emit("@"+(e.vendor||"")+"keyframes "+e.name,e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.keyframes,"\n")+this.emit(this.indent(-1)+"}")},o.prototype.keyframe=function(e){var t=e.declarations;return this.emit(this.indent())+this.emit(e.values.join(", "),e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(t,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")},o.prototype.page=function(e){var t=e.selectors.length?e.selectors.join(", ")+" ":"";return this.emit("@page "+t,e.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(e.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")},o.prototype["font-face"]=function(e){return this.emit("@font-face ",e.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(e.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")},o.prototype.host=function(e){return this.emit("@host",e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},o.prototype["custom-media"]=function(e){return this.emit("@custom-media "+e.name+" "+e.media+";",e.position)},o.prototype.rule=function(e){var t=this.indent(),n=e.declarations;return n.length?this.emit(e.selectors.map((function(e){return t+e})).join(",\n"),e.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(n,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""},o.prototype.declaration=function(e){return this.emit(this.indent())+this.emit(e.property+": "+e.value,e.position)+this.emit(";")},o.prototype.indent=function(e){return this.level=this.level||1,null!=e?(this.level+=e,""):Array(this.level).join(this.indentation||"  ")}},980:(e,t,n)=>{var r=n(78),i=n(483);e.exports=function(e,t){var o=(t=t||{}).compress?new r(t):new i(t);if(t.sourcemap){n(835)(o);var s=o.compile(e);return o.applySourceMaps(),{code:s,map:"generator"===t.sourcemap?o.map:o.map.toJSON()}}return o.compile(e)}},835:(e,t,n)=>{var r=n(125).SourceMapGenerator,i=n(125).SourceMapConsumer,o=n(59),s=n(147),a=n(17);e.exports=function(e){for(var n in e._comment=e.comment,e.map=new r,e.position={line:1,column:1},e.files={},t)e[n]=t[n]};const u=function(e){return"\\"===a.sep?e.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):e};t.updatePosition=function(e){var t=e.match(/\n/g);t&&(this.position.line+=t.length);var n=e.lastIndexOf("\n");this.position.column=~n?e.length-n:this.position.column+e.length},t.emit=function(e,t){if(t){var n=u(t.source||"source.css");this.map.addMapping({source:n,generated:{line:this.position.line,column:Math.max(this.position.column-1,0)},original:{line:t.start.line,column:t.start.column-1}}),this.addFile(n,t)}return this.updatePosition(e),e},t.addFile=function(e,t){"string"==typeof t.content&&(Object.prototype.hasOwnProperty.call(this.files,e)||(this.files[e]=t.content))},t.applySourceMaps=function(){Object.keys(this.files).forEach((function(e){var t=this.files[e];if(this.map.setSourceContent(e,t),!1!==this.options.inputSourcemaps){var n=o.resolveSync(t,e,s.readFileSync);if(n){var r=new i(n.map),l=n.sourcesRelativeTo;this.map.applySourceMap(r,e,u(a.dirname(l)))}}}),this)},t.comment=function(e){return/^# sourceMappingURL=/.test(e.comment)?this.emit("",e.position):this._comment(e)}},20:e=>{"use strict";var t="%[a-f0-9]{2}",n=new RegExp(t,"gi"),r=new RegExp("("+t+")+","gi");function i(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],i(n),i(r))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(n),r=1;r<t.length;r++)t=(e=i(t,r).join("")).match(n);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=r.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var i=o(n[0]);i!==n[0]&&(t[n[0]]=i)}n=r.exec(e)}t["%C2"]="�";for(var s=Object.keys(t),a=0;a<s.length;a++){var u=s[a];e=e.replace(new RegExp(u,"g"),t[u])}return e}(e)}}},802:(e,t)=>{function n(e,t){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];e[r]&&"object"==typeof i&&i instanceof RegExp==0?n(e[r],i):e[r]=i}}t.create=function(e,t,r){var i=0,o=null,s=null,a={text:"",peek:function(e){return e=e||1,this.raw.substr(this.index+1,e)},read:function(e){if(0===e)return"";e=e||1;var t=this.peek(e);return this.index+=e,this.index>this.length&&(this.index=this.length),t},readUntilNonWhitespace:function(){for(var e,t="";!this.isEof()&&(e=this.read(),/\s$/.test(t+=e)););return t},isEof:function(){return this.index>=this.length},readRegex:function(e){var t=(e.exec(this.raw.substring(this.index))||[""])[0];return this.index+=t.length,t},peekIgnoreWhitespace:function(e){e=e||1;var t="",n="",r=0;do{if(!(n=this.raw.charAt(this.index+ ++r)))break;/\s/.test(n)||(t+=n)}while(t.length<e);return t}};return a.__defineGetter__("current",(function(){return this.isEof()?"":null===o?o=this.raw.charAt(this.index):o})),a.__defineGetter__("raw",(function(){return e})),a.__defineGetter__("length",(function(){return this.raw.length})),a.__defineGetter__("index",(function(){return i})),a.__defineSetter__("index",(function(e){i=e,o=null,s=null})),a.__defineGetter__("substring",(function(){return null===s?s=this.raw.substring(this.index):s})),a.callbacks={},["openElement","closeElement","attribute","comment","cdata","text","docType","xmlProlog","closeOpenedElement"].forEach((function(e){a.callbacks[e]=function(){}})),n(a.callbacks,t||{}),a.regex={name:/[a-zA-Z_][\w:\-\.]*/,attribute:/[a-zA-Z_][\w:\-\.]*/,dataElements:{cdata:{start:"<![CDATA[",end:"]]>"},comment:{start:"\x3c!--",end:"--\x3e"},docType:{start:/^<!DOCTYPE /i,end:">"}}},n(a.regex,r||{}),a}},155:(e,t,n)=>{var r=n(802),i=n(147);function o(e){var t=e.readRegex(e.regex.attribute),n=null,r="";if("="===e.current||"="===e.peekIgnoreWhitespace()){var i;switch(e.readRegex(/\s*=\s*/),e.current){case"'":i=/('(\\'|<%.*?%>|[^'])*?')/,r="'";break;case'"':i=/("(\\"|<%.*?%>|[^"])*?")/,r='"';break;case"<":i="%"===e.peek()?/(<%.*?%>)/:/(.*?)(?=[\s><])/;break;default:i=/(.*?)(?=[\s><])/}var o=i.exec(e.substring)||[0,""];n=o[1],e.read(o[0].length),'"'!==n[0]&&"'"!==n[0]||(n=n.substring(1)),'"'!==n[n.length-1]&&"'"!==n[n.length-1]||(n=n.substring(0,n.length-1))}e.callbacks.attribute(t,n,r)}function s(e,t){for(var n,r=e.current;!e.isEof()&&!(t?"?"===e.current&&">"===e.peek():">"===e.current||"/"===e.current&&">"===e.peekIgnoreWhitespace());){if(n=!1,"<"===e.current)for(var i in e.regex.dataElements)if(e.regex.dataElements.hasOwnProperty(i)){var s=e.regex.dataElements[i],a=s.start,c=!1;switch(typeof a){case"string":c=e.substring.slice(0,a.length)===a;break;case"object":c=a.test(e.substring);break;case"function":c=a(e.substring)>-1}if(c){l(e),e.callbacks[i](u(e,s)),r=e.current,n=!0;break}r=e.current}n||(e.regex.attribute.test(r)?(o(e),r=e.current):r=e.read())}}function a(e,t){var n=t in{area:!0,base:!0,basefont:!0,br:!0,col:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,link:!0,meta:!0,param:!0,embed:!0};"/"===e.current?(e.readUntilNonWhitespace(),e.read(),e.callbacks.closeOpenedElement(t,"/>",n)):"?"===e.current?(e.read(2),e.callbacks.closeOpenedElement(t,"?>",n)):(e.read(),e.callbacks.closeOpenedElement(t,">",n))}function u(e,t){var n=t.start,r=t.data,i=t.end;switch(typeof n){case"string":n=n.length;break;case"object":n=(n=n.exec(e.substring))[n.length-1].length;break;case"function":n=n(e.substring)}switch(e.read(n),typeof r){case"object":r=(r=r.exec(e.substring))[r.length-1];break;case"function":r=r(e.substring);break;case"undefined":var o=-1;switch(typeof i){case"string":o=e.substring.indexOf(i);break;case"object":var s=e.substring.match(i);s&&(s=s[s.length-1],o=e.substring.indexOf(s))}r=o>-1?e.substring.slice(0,o):e.substring}switch(e.read(r.length),typeof i){case"string":i=i.length;break;case"object":i=(i=i.exec(e.substring))[i.length-1].length;break;case"function":i=i(e.substring)}return e.read(i),r}function l(e){e.text&&(e.callbacks.text(e.text),e.text="")}function c(e){if("<"===e.current){var t=e.substring.charAt(1);if("/"===t&&e.regex.name.test(e.substring.charAt(2)))return e.read(2),l(e),void function(e){var t=e.readRegex(e.regex.name);e.callbacks.closeElement(t),e.readRegex(/.*?(?:>|$)/)}(e);if("?"===t&&/^<\?xml/.test(e.substring))return e.read(1),l(e),void function(e){e.read(4),e.callbacks.xmlProlog(),s(e,!0),a(e,"?xml")}(e);if(e.regex.name.test(t))return e.read(1),l(e),void function(e){var t=e.readRegex(e.regex.name);if(e.callbacks.openElement(t),s(e,!1),a(e,t),/^(script|xmp|style)$/i.test(t)){var n=new RegExp("^([\\s\\S]*?)(?:$|</("+t+")\\s*>)","i").exec(e.substring);e.read(n[0].length),n[1]&&e.callbacks.cdata(n[1]),n[2]&&e.callbacks.closeElement(n[2])}}(e)}for(var n in e.regex.dataElements)if(e.regex.dataElements.hasOwnProperty(n)){var r=e.regex.dataElements[n],i=r.start,o=!1;switch(typeof i){case"string":o=e.substring.slice(0,i.length)===i;break;case"object":o=i.test(e.substring);break;case"function":o=i(e.substring)>-1}if(o)return l(e),void e.callbacks[n](u(e,r))}!function(e,t){t.text+=e}(e.current,e),e.read()}t.parse=function(e,t,n){e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n");var i=r.create(e,t,n);do{c(i)}while(!i.isEof());l(i)},t.parseFile=function(e,n,r,o){i.readFile(e,n||"utf8",(function(e,n){e?o&&o(e):(t.parse(n,r),o&&o())}))},t.sanitize=function(e,n){function r(e){var t=n[e]||[];return"function"==typeof t?function(){return t.apply(null,arguments)}:function(e){return-1!==t.indexOf(e)}}function i(e){var t=n[e]||!1;return"function"==typeof t?function(){return t.apply(null,arguments)}:function(){return t}}function o(e){return e[e.length-1]}n=n||{};var s={attributes:r("attributes"),elements:r("elements"),comments:i("comments"),docTypes:i("docTypes")},a="",u=[],l=[],c={meta:1,br:1,link:1,area:1,base:1,col:1,command:1,embed:1,hr:1,img:1,input:1,param:1,source:1},p={docType:function(e){s.docTypes(e)||(a+="<!doctype "+e+">")},openElement:function(e){if(e=e.toLowerCase(),u.length){var t=o(u);c[t]&&(u.pop(),t===o(l)&&l.pop())}l.length||(u.push(e),s.elements(e)?l.push(e):a+="<"+e)},closeOpenedElement:function(e,t){e=e.toLowerCase(),2===t.length&&u.pop()===o(l)&&l.pop(),l.length||s.elements(e)||(a+=t)},closeElement:function(e){e=e.toLowerCase(),u.length&&o(u)===e&&u.pop()===o(l)&&l.pop(),l.length||s.elements(e)||(a+="</"+e+">")},attribute:function(e,t,n){l.length||(e=e.toLowerCase(),s.attributes(e,t)||(a+=" "+e,t&&(a+="="+n+('"'===n?t.replace(/"/g,"&quot;"):t.replace(/'/g,"&apos;"))+n)))},text:function(e){l.length||(a+=e)},comment:function(e){l.length||s.comments(e)||(a+="\x3c!--"+e+"--\x3e")},cdata:function(e){if(!l.length){for(var t=u.length-1;t>=0;t--)if("script"===u[t]||"xmp"===u[t]||"style"===u[t])return void(a+=e);a+="<![CDATA["+e+"]]>"}}};return t.parse(e,p),a}},378:(e,t,n)=>{try{var r=n(837);if("function"!=typeof r.inherits)throw"";e.exports=r.inherits}catch(t){e.exports=n(717)}},717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},568:(e,t,n)=>{var r,i,o,s,a;r=n(12),i=n(487).utf8,o=n(738),s=n(487).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):i.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),u=8*e.length,l=1732584193,c=-271733879,p=-1732584194,h=271733878,f=0;f<n.length;f++)n[f]=16711935&(n[f]<<8|n[f]>>>24)|4278255360&(n[f]<<24|n[f]>>>8);n[u>>>5]|=128<<u%32,n[14+(u+64>>>9<<4)]=u;var d=a._ff,g=a._gg,m=a._hh,v=a._ii;for(f=0;f<n.length;f+=16){var y=l,_=c,w=p,x=h;l=d(l,c,p,h,n[f+0],7,-680876936),h=d(h,l,c,p,n[f+1],12,-389564586),p=d(p,h,l,c,n[f+2],17,606105819),c=d(c,p,h,l,n[f+3],22,-1044525330),l=d(l,c,p,h,n[f+4],7,-176418897),h=d(h,l,c,p,n[f+5],12,1200080426),p=d(p,h,l,c,n[f+6],17,-1473231341),c=d(c,p,h,l,n[f+7],22,-45705983),l=d(l,c,p,h,n[f+8],7,1770035416),h=d(h,l,c,p,n[f+9],12,-1958414417),p=d(p,h,l,c,n[f+10],17,-42063),c=d(c,p,h,l,n[f+11],22,-1990404162),l=d(l,c,p,h,n[f+12],7,1804603682),h=d(h,l,c,p,n[f+13],12,-40341101),p=d(p,h,l,c,n[f+14],17,-1502002290),l=g(l,c=d(c,p,h,l,n[f+15],22,1236535329),p,h,n[f+1],5,-165796510),h=g(h,l,c,p,n[f+6],9,-1069501632),p=g(p,h,l,c,n[f+11],14,643717713),c=g(c,p,h,l,n[f+0],20,-373897302),l=g(l,c,p,h,n[f+5],5,-701558691),h=g(h,l,c,p,n[f+10],9,38016083),p=g(p,h,l,c,n[f+15],14,-660478335),c=g(c,p,h,l,n[f+4],20,-405537848),l=g(l,c,p,h,n[f+9],5,568446438),h=g(h,l,c,p,n[f+14],9,-1019803690),p=g(p,h,l,c,n[f+3],14,-187363961),c=g(c,p,h,l,n[f+8],20,1163531501),l=g(l,c,p,h,n[f+13],5,-1444681467),h=g(h,l,c,p,n[f+2],9,-51403784),p=g(p,h,l,c,n[f+7],14,1735328473),l=m(l,c=g(c,p,h,l,n[f+12],20,-1926607734),p,h,n[f+5],4,-378558),h=m(h,l,c,p,n[f+8],11,-2022574463),p=m(p,h,l,c,n[f+11],16,1839030562),c=m(c,p,h,l,n[f+14],23,-35309556),l=m(l,c,p,h,n[f+1],4,-1530992060),h=m(h,l,c,p,n[f+4],11,1272893353),p=m(p,h,l,c,n[f+7],16,-155497632),c=m(c,p,h,l,n[f+10],23,-1094730640),l=m(l,c,p,h,n[f+13],4,681279174),h=m(h,l,c,p,n[f+0],11,-358537222),p=m(p,h,l,c,n[f+3],16,-722521979),c=m(c,p,h,l,n[f+6],23,76029189),l=m(l,c,p,h,n[f+9],4,-640364487),h=m(h,l,c,p,n[f+12],11,-421815835),p=m(p,h,l,c,n[f+15],16,530742520),l=v(l,c=m(c,p,h,l,n[f+2],23,-995338651),p,h,n[f+0],6,-198630844),h=v(h,l,c,p,n[f+7],10,1126891415),p=v(p,h,l,c,n[f+14],15,-1416354905),c=v(c,p,h,l,n[f+5],21,-57434055),l=v(l,c,p,h,n[f+12],6,1700485571),h=v(h,l,c,p,n[f+3],10,-1894986606),p=v(p,h,l,c,n[f+10],15,-1051523),c=v(c,p,h,l,n[f+1],21,-2054922799),l=v(l,c,p,h,n[f+8],6,1873313359),h=v(h,l,c,p,n[f+15],10,-30611744),p=v(p,h,l,c,n[f+6],15,-1560198380),c=v(c,p,h,l,n[f+13],21,1309151649),l=v(l,c,p,h,n[f+4],6,-145523070),h=v(h,l,c,p,n[f+11],10,-1120210379),p=v(p,h,l,c,n[f+2],15,718787259),c=v(c,p,h,l,n[f+9],21,-343485551),l=l+y>>>0,c=c+_>>>0,p=p+w>>>0,h=h+x>>>0}return r.endian([l,c,p,h])})._ff=function(e,t,n,r,i,o,s){var a=e+(t&n|~t&r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._gg=function(e,t,n,r,i,o,s){var a=e+(t&r|n&~r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._hh=function(e,t,n,r,i,o,s){var a=e+(t^n^r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._ii=function(e,t,n,r,i,o,s){var a=e+(n^(t|~r))+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(a(e,t));return t&&t.asBytes?n:t&&t.asString?s.bytesToString(n):r.bytesToHex(n)}},59:(e,t,n)=>{var r=n(825),i=n(310),o=n(17),s=n(20);function a(){return Array.prototype.reduce.call(arguments,(function(e,t){return i.resolve(e,t)}))}function u(e){return"\\"===o.sep?e.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):e}function l(e){return s(e.replace(/\+/g,"%2B"))}function c(e,t,n){setImmediate((function(){e(t,n)}))}function p(e,t){try{return JSON.parse(e.replace(/^\)\]\}'/,""))}catch(e){throw e.sourceMapData=t,e}}function h(e,t,n){var r=l(t);try{return String(e(r))}catch(e){throw e.sourceMapData=n,e}}var f=/[#@] sourceMappingURL=([^\s'"]*)/,d=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+f.source+")\\s*\\*/|//(?:"+f.source+"))\\s*");function g(e,t,n,r){var i;try{i=_(e,t)}catch(e){return c(r,e)}if(!i||i.map)return c(r,null,i);n(l(i.url),(function(e,t){if(e)return e.sourceMapData=i,r(e);i.map=String(t);try{i.map=p(i.map,i)}catch(e){return r(e)}r(null,i)}))}function m(e,t,n){var r=_(e,t);return!r||r.map||(r.map=h(n,r.url,r),r.map=p(r.map,r)),r}var v=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,y=/^(?:application|text)\/json$/;function _(e,t){t=u(t);var n=function(e){var t=e.match(d);return t?t[1]||t[2]||"":null}(e);if(!n)return null;var i=n.match(v);if(i){var o=i[1]||"text/plain",s=i[2]||"",l=i[3]||"",c={sourceMappingURL:n,url:null,sourcesRelativeTo:t,map:l};if(!y.test(o)){var h=new Error("Unuseful data uri mime type: "+o);throw h.sourceMapData=c,h}try{c.map=p(";base64"===s?function(e){if("undefined"==typeof TextDecoder||"undefined"==typeof Uint8Array)return r(e);var t=function(e){for(var t=r(e),n=t.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=t.charCodeAt(o);return i}(e);return new TextDecoder("utf-8",{fatal:!0}).decode(t)}(l):decodeURIComponent(l),c)}catch(h){throw h.sourceMapData=c,h}return c}var f=a(t,n);return{sourceMappingURL:n,url:f,sourcesRelativeTo:f,map:null}}function w(e,t,n,r,i){"function"==typeof r&&(i=r,r={});var o=e.sources?e.sources.length:0,s={sourcesResolved:[],sourcesContent:[]};if(0!==o){var a=function(){0==--o&&i(null,s)};C(e,t,r,(function(e,t,r){if(s.sourcesResolved[r]=e,"string"==typeof t)s.sourcesContent[r]=t,c(a,null);else{var i=l(e);n(i,(function(e,t){s.sourcesContent[r]=e||String(t),a()}))}}))}else c(i,null,s)}function x(e,t,n,r){var i={sourcesResolved:[],sourcesContent:[]};return e.sources&&0!==e.sources.length?(C(e,t,r,(function(e,t,r){if(i.sourcesResolved[r]=e,null!==n)if("string"==typeof t)i.sourcesContent[r]=t;else{var o=l(e);try{i.sourcesContent[r]=String(n(o))}catch(e){i.sourcesContent[r]=e}}})),i):i}var b=/\/?$/;function C(e,t,n,r){var i;n=n||{},t=u(t);for(var o=0,s=e.sources.length;o<s;o++)i=null,"string"==typeof n.sourceRoot?i=n.sourceRoot:"string"==typeof e.sourceRoot&&!1!==n.sourceRoot&&(i=e.sourceRoot),r(null===i||""===i?a(t,e.sources[o]):a(t,i.replace(b,"/"),e.sources[o]),(e.sourcesContent||[])[o],o)}e.exports={resolveSourceMap:g,resolveSourceMapSync:m,resolveSources:w,resolveSourcesSync:x,resolve:function(e,t,n,r,i){if("function"==typeof r&&(i=r,r={}),null===e){var o={sourceMappingURL:null,url:t,sourcesRelativeTo:t,map:null},s=l(t);n(s,(function(e,t){if(e)return e.sourceMapData=o,i(e);o.map=String(t);try{o.map=p(o.map,o)}catch(e){return i(e)}a(o)}))}else g(e,t,n,(function(e,t){return e?i(e):t?void a(t):i(null,null)}));function a(e){w(e.map,e.sourcesRelativeTo,n,r,(function(t,n){if(t)return i(t);e.sourcesResolved=n.sourcesResolved,e.sourcesContent=n.sourcesContent,i(null,e)}))}},resolveSync:function(e,t,n,r){var i;if(null===e)(i={sourceMappingURL:null,url:t,sourcesRelativeTo:t,map:null}).map=h(n,t,i),i.map=p(i.map,i);else if(!(i=m(e,t,n)))return null;var o=x(i.map,i.sourcesRelativeTo,n,r);return i.sourcesResolved=o.sourcesResolved,i.sourcesContent=o.sourcesContent,i},parseMapToJSON:p}},213:(e,t,n)=>{var r=n(728),i=Object.prototype.hasOwnProperty,o="undefined"!=typeof Map;function s(){this._array=[],this._set=o?new Map:Object.create(null)}s.fromArray=function(e,t){for(var n=new s,r=0,i=e.length;r<i;r++)n.add(e[r],t);return n},s.prototype.size=function(){return o?this._set.size:Object.getOwnPropertyNames(this._set).length},s.prototype.add=function(e,t){var n=o?e:r.toSetString(e),s=o?this.has(e):i.call(this._set,n),a=this._array.length;s&&!t||this._array.push(e),s||(o?this._set.set(e,a):this._set[n]=a)},s.prototype.has=function(e){if(o)return this._set.has(e);var t=r.toSetString(e);return i.call(this._set,t)},s.prototype.indexOf=function(e){if(o){var t=this._set.get(e);if(t>=0)return t}else{var n=r.toSetString(e);if(i.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},s.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},s.prototype.toArray=function(){return this._array.slice()},t.I=s},400:(e,t,n)=>{var r=n(923);t.encode=function(e){var t,n="",i=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&i,(i>>>=5)>0&&(t|=32),n+=r.encode(t)}while(i>0);return n},t.decode=function(e,t,n){var i,o,s,a,u=e.length,l=0,c=0;do{if(t>=u)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=r.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));i=!!(32&o),l+=(o&=31)<<c,c+=5}while(i);n.value=(a=(s=l)>>1,1==(1&s)?-a:a),n.rest=t}},923:(e,t)=>{var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.encode=function(e){if(0<=e&&e<n.length)return n[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},216:(e,t)=>{function n(e,r,i,o,s,a){var u=Math.floor((r-e)/2)+e,l=s(i,o[u],!0);return 0===l?u:l>0?r-u>1?n(u,r,i,o,s,a):a==t.LEAST_UPPER_BOUND?r<o.length?r:-1:u:u-e>1?n(e,u,i,o,s,a):a==t.LEAST_UPPER_BOUND?u:e<0?-1:e}t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.search=function(e,r,i,o){if(0===r.length)return-1;var s=n(-1,r.length,e,r,i,o||t.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===i(r[s],r[s-1],!0);)--s;return s}},188:(e,t,n)=>{var r=n(728);function i(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}i.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},i.prototype.add=function(e){var t,n,i,o,s,a;n=e,i=(t=this._last).generatedLine,o=n.generatedLine,s=t.generatedColumn,a=n.generatedColumn,o>i||o==i&&a>=s||r.compareByGeneratedPositionsInflated(t,n)<=0?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},i.prototype.toArray=function(){return this._sorted||(this._array.sort(r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},t.H=i},826:(e,t)=>{function n(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function r(e,t,i,o){if(i<o){var s=i-1;n(e,(c=i,p=o,Math.round(c+Math.random()*(p-c))),o);for(var a=e[o],u=i;u<o;u++)t(e[u],a)<=0&&n(e,s+=1,u);n(e,s+1,u);var l=s+1;r(e,t,i,l-1),r(e,t,l+1,o)}var c,p}t.U=function(e,t){r(e,t,0,e.length-1)}},771:(e,t,n)=>{var r=n(728),i=n(216),o=n(213).I,s=n(400),a=n(826).U;function u(e,t){var n=e;return"string"==typeof e&&(n=r.parseSourceMapInput(e)),null!=n.sections?new p(n,t):new l(n,t)}function l(e,t){var n=e;"string"==typeof e&&(n=r.parseSourceMapInput(e));var i=r.getArg(n,"version"),s=r.getArg(n,"sources"),a=r.getArg(n,"names",[]),u=r.getArg(n,"sourceRoot",null),l=r.getArg(n,"sourcesContent",null),c=r.getArg(n,"mappings"),p=r.getArg(n,"file",null);if(i!=this._version)throw new Error("Unsupported version: "+i);u&&(u=r.normalize(u)),s=s.map(String).map(r.normalize).map((function(e){return u&&r.isAbsolute(u)&&r.isAbsolute(e)?r.relative(u,e):e})),this._names=o.fromArray(a.map(String),!0),this._sources=o.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map((function(e){return r.computeSourceURL(u,e,t)})),this.sourceRoot=u,this.sourcesContent=l,this._mappings=c,this._sourceMapURL=t,this.file=p}function c(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function p(e,t){var n=e;"string"==typeof e&&(n=r.parseSourceMapInput(e));var i=r.getArg(n,"version"),s=r.getArg(n,"sections");if(i!=this._version)throw new Error("Unsupported version: "+i);this._sources=new o,this._names=new o;var a={line:-1,column:0};this._sections=s.map((function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var n=r.getArg(e,"offset"),i=r.getArg(n,"line"),o=r.getArg(n,"column");if(i<a.line||i===a.line&&o<a.column)throw new Error("Section offsets must be ordered and non-overlapping.");return a=n,{generatedOffset:{generatedLine:i+1,generatedColumn:o+1},consumer:new u(r.getArg(e,"map"),t)}}))}u.fromSourceMap=function(e,t){return l.fromSourceMap(e,t)},u.prototype._version=3,u.prototype.__generatedMappings=null,Object.defineProperty(u.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),u.prototype.__originalMappings=null,Object.defineProperty(u.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),u.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},u.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},u.GENERATED_ORDER=1,u.ORIGINAL_ORDER=2,u.GREATEST_LOWER_BOUND=1,u.LEAST_UPPER_BOUND=2,u.prototype.eachMapping=function(e,t,n){var i,o=t||null;switch(n||u.GENERATED_ORDER){case u.GENERATED_ORDER:i=this._generatedMappings;break;case u.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;i.map((function(e){var t=null===e.source?null:this._sources.at(e.source);return{source:t=r.computeSourceURL(s,t,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}}),this).forEach(e,o)},u.prototype.allGeneratedPositionsFor=function(e){var t=r.getArg(e,"line"),n={source:r.getArg(e,"source"),originalLine:t,originalColumn:r.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var o=[],s=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,i.LEAST_UPPER_BOUND);if(s>=0){var a=this._originalMappings[s];if(void 0===e.column)for(var u=a.originalLine;a&&a.originalLine===u;)o.push({line:r.getArg(a,"generatedLine",null),column:r.getArg(a,"generatedColumn",null),lastColumn:r.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s];else for(var l=a.originalColumn;a&&a.originalLine===t&&a.originalColumn==l;)o.push({line:r.getArg(a,"generatedLine",null),column:r.getArg(a,"generatedColumn",null),lastColumn:r.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s]}return o},t.SourceMapConsumer=u,l.prototype=Object.create(u.prototype),l.prototype.consumer=u,l.prototype._findSourceIndex=function(e){var t,n=e;if(null!=this.sourceRoot&&(n=r.relative(this.sourceRoot,n)),this._sources.has(n))return this._sources.indexOf(n);for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1},l.fromSourceMap=function(e,t){var n=Object.create(l.prototype),i=n._names=o.fromArray(e._names.toArray(),!0),s=n._sources=o.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=t,n._absoluteSources=n._sources.toArray().map((function(e){return r.computeSourceURL(n.sourceRoot,e,t)}));for(var u=e._mappings.toArray().slice(),p=n.__generatedMappings=[],h=n.__originalMappings=[],f=0,d=u.length;f<d;f++){var g=u[f],m=new c;m.generatedLine=g.generatedLine,m.generatedColumn=g.generatedColumn,g.source&&(m.source=s.indexOf(g.source),m.originalLine=g.originalLine,m.originalColumn=g.originalColumn,g.name&&(m.name=i.indexOf(g.name)),h.push(m)),p.push(m)}return a(n.__originalMappings,r.compareByOriginalPositions),n},l.prototype._version=3,Object.defineProperty(l.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),l.prototype._parseMappings=function(e,t){for(var n,i,o,u,l,p=1,h=0,f=0,d=0,g=0,m=0,v=e.length,y=0,_={},w={},x=[],b=[];y<v;)if(";"===e.charAt(y))p++,y++,h=0;else if(","===e.charAt(y))y++;else{for((n=new c).generatedLine=p,u=y;u<v&&!this._charIsMappingSeparator(e,u);u++);if(o=_[i=e.slice(y,u)])y+=i.length;else{for(o=[];y<u;)s.decode(e,y,w),l=w.value,y=w.rest,o.push(l);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");_[i]=o}n.generatedColumn=h+o[0],h=n.generatedColumn,o.length>1&&(n.source=g+o[1],g+=o[1],n.originalLine=f+o[2],f=n.originalLine,n.originalLine+=1,n.originalColumn=d+o[3],d=n.originalColumn,o.length>4&&(n.name=m+o[4],m+=o[4])),b.push(n),"number"==typeof n.originalLine&&x.push(n)}a(b,r.compareByGeneratedPositionsDeflated),this.__generatedMappings=b,a(x,r.compareByOriginalPositions),this.__originalMappings=x},l.prototype._findMapping=function(e,t,n,r,o,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return i.search(e,t,o,s)},l.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},l.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",r.compareByGeneratedPositionsDeflated,r.getArg(e,"bias",u.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===t.generatedLine){var o=r.getArg(i,"source",null);null!==o&&(o=this._sources.at(o),o=r.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var s=r.getArg(i,"name",null);return null!==s&&(s=this._names.at(s)),{source:o,line:r.getArg(i,"originalLine",null),column:r.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},l.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e}))},l.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i,o=e;if(null!=this.sourceRoot&&(o=r.relative(this.sourceRoot,o)),null!=this.sourceRoot&&(i=r.urlParse(this.sourceRoot))){var s=o.replace(/^file:\/\//,"");if("file"==i.scheme&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!i.path||"/"==i.path)&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(t)return null;throw new Error('"'+o+'" is not in the SourceMap.')},l.prototype.generatedPositionFor=function(e){var t=r.getArg(e,"source");if((t=this._findSourceIndex(t))<0)return{line:null,column:null,lastColumn:null};var n={source:t,originalLine:r.getArg(e,"line"),originalColumn:r.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,r.getArg(e,"bias",u.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:r.getArg(o,"generatedLine",null),column:r.getArg(o,"generatedColumn",null),lastColumn:r.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},p.prototype=Object.create(u.prototype),p.prototype.constructor=u,p.prototype._version=3,Object.defineProperty(p.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),p.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=i.search(t,this._sections,(function(e,t){return e.generatedLine-t.generatedOffset.generatedLine||e.generatedColumn-t.generatedOffset.generatedColumn})),o=this._sections[n];return o?o.consumer.originalPositionFor({line:t.generatedLine-(o.generatedOffset.generatedLine-1),column:t.generatedColumn-(o.generatedOffset.generatedLine===t.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},p.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))},p.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},p.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer._findSourceIndex(r.getArg(e,"source"))){var i=n.consumer.generatedPositionFor(e);if(i)return{line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},p.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var u=o[s],l=i.consumer._sources.at(u.source);l=r.computeSourceURL(i.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var c=null;u.name&&(c=i.consumer._names.at(u.name),this._names.add(c),c=this._names.indexOf(c));var p={source:l,generatedLine:u.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:u.generatedColumn+(i.generatedOffset.generatedLine===u.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:u.originalLine,originalColumn:u.originalColumn,name:c};this.__generatedMappings.push(p),"number"==typeof p.originalLine&&this.__originalMappings.push(p)}a(this.__generatedMappings,r.compareByGeneratedPositionsDeflated),a(this.__originalMappings,r.compareByOriginalPositions)}},433:(e,t,n)=>{var r=n(400),i=n(728),o=n(213).I,s=n(188).H;function a(e){e||(e={}),this._file=i.getArg(e,"file",null),this._sourceRoot=i.getArg(e,"sourceRoot",null),this._skipValidation=i.getArg(e,"skipValidation",!1),this._sources=new o,this._names=new o,this._mappings=new s,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(e){var t=e.sourceRoot,n=new a({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var r={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(r.source=e.source,null!=t&&(r.source=i.relative(t,r.source)),r.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(r.name=e.name)),n.addMapping(r)})),e.sources.forEach((function(r){var o=r;null!==t&&(o=i.relative(t,r)),n._sources.has(o)||n._sources.add(o);var s=e.sourceContentFor(r);null!=s&&n.setSourceContent(r,s)})),n},a.prototype.addMapping=function(e){var t=i.getArg(e,"generated"),n=i.getArg(e,"original",null),r=i.getArg(e,"source",null),o=i.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,r,o),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:o})},a.prototype.setSourceContent=function(e,t){var n=e;null!=this._sourceRoot&&(n=i.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[i.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[i.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(e,t,n){var r=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=e.file}var s=this._sourceRoot;null!=s&&(r=i.relative(s,r));var a=new o,u=new o;this._mappings.unsortedForEach((function(t){if(t.source===r&&null!=t.originalLine){var o=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=o.source&&(t.source=o.source,null!=n&&(t.source=i.join(n,t.source)),null!=s&&(t.source=i.relative(s,t.source)),t.originalLine=o.line,t.originalColumn=o.column,null!=o.name&&(t.name=o.name))}var l=t.source;null==l||a.has(l)||a.add(l);var c=t.name;null==c||u.has(c)||u.add(c)}),this),this._sources=a,this._names=u,e.sources.forEach((function(t){var r=e.sourceContentFor(t);null!=r&&(null!=n&&(t=i.join(n,t)),null!=s&&(t=i.relative(s,t)),this.setSourceContent(t,r))}),this)},a.prototype._validateMapping=function(e,t,n,r){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||r)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))},a.prototype._serializeMappings=function(){for(var e,t,n,o,s=0,a=1,u=0,l=0,c=0,p=0,h="",f=this._mappings.toArray(),d=0,g=f.length;d<g;d++){if(e="",(t=f[d]).generatedLine!==a)for(s=0;t.generatedLine!==a;)e+=";",a++;else if(d>0){if(!i.compareByGeneratedPositionsInflated(t,f[d-1]))continue;e+=","}e+=r.encode(t.generatedColumn-s),s=t.generatedColumn,null!=t.source&&(o=this._sources.indexOf(t.source),e+=r.encode(o-p),p=o,e+=r.encode(t.originalLine-1-l),l=t.originalLine-1,e+=r.encode(t.originalColumn-u),u=t.originalColumn,null!=t.name&&(n=this._names.indexOf(t.name),e+=r.encode(n-c),c=n)),h+=e}return h},a.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=i.relative(t,e));var n=i.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null}),this)},a.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},a.prototype.toString=function(){return JSON.stringify(this.toJSON())},t.SourceMapGenerator=a},85:(e,t,n)=>{var r=n(433).SourceMapGenerator,i=n(728),o=/(\r?\n)/,s="$$$isSourceNode$$$";function a(e,t,n,r,i){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==i?null:i,this[s]=!0,null!=r&&this.add(r)}a.fromStringWithSourceMap=function(e,t,n){var r=new a,s=e.split(o),u=0,l=function(){return e()+(e()||"");function e(){return u<s.length?s[u++]:void 0}},c=1,p=0,h=null;return t.eachMapping((function(e){if(null!==h){if(!(c<e.generatedLine)){var t=(n=s[u]||"").substr(0,e.generatedColumn-p);return s[u]=n.substr(e.generatedColumn-p),p=e.generatedColumn,f(h,t),void(h=e)}f(h,l()),c++,p=0}for(;c<e.generatedLine;)r.add(l()),c++;if(p<e.generatedColumn){var n=s[u]||"";r.add(n.substr(0,e.generatedColumn)),s[u]=n.substr(e.generatedColumn),p=e.generatedColumn}h=e}),this),u<s.length&&(h&&f(h,l()),r.add(s.splice(u).join(""))),t.sources.forEach((function(e){var o=t.sourceContentFor(e);null!=o&&(null!=n&&(e=i.join(n,e)),r.setSourceContent(e,o))})),r;function f(e,t){if(null===e||void 0===e.source)r.add(t);else{var o=n?i.join(n,e.source):e.source;r.add(new a(e.originalLine,e.originalColumn,o,t,e.name))}}},a.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},a.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},a.prototype.walk=function(e){for(var t,n=0,r=this.children.length;n<r;n++)(t=this.children[n])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;n<r-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},a.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[s]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},a.prototype.setSourceContent=function(e,t){this.sourceContents[i.toSetString(e)]=t},a.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);var r=Object.keys(this.sourceContents);for(t=0,n=r.length;t<n;t++)e(i.fromSetString(r[t]),this.sourceContents[r[t]])},a.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},a.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new r(e),i=!1,o=null,s=null,a=null,u=null;return this.walk((function(e,r){t.code+=e,null!==r.source&&null!==r.line&&null!==r.column?(o===r.source&&s===r.line&&a===r.column&&u===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name}),o=r.source,s=r.line,a=r.column,u=r.name,i=!0):i&&(n.addMapping({generated:{line:t.line,column:t.column}}),o=null,i=!1);for(var l=0,c=e.length;l<c;l++)10===e.charCodeAt(l)?(t.line++,t.column=0,l+1===c?(o=null,i=!1):i&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name})):t.column++})),this.walkSourceContents((function(e,t){n.setSourceContent(e,t)})),{code:t.code,map:n}}},728:(e,t)=>{t.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,r=/^data:.+\,.+$/;function i(e){var t=e.match(n);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(e){var n=e,r=i(e);if(r){if(!r.path)return e;n=r.path}for(var s,a=t.isAbsolute(n),u=n.split(/\/+/),l=0,c=u.length-1;c>=0;c--)"."===(s=u[c])?u.splice(c,1):".."===s?l++:l>0&&(""===s?(u.splice(c+1,l),l=0):(u.splice(c,2),l--));return""===(n=u.join("/"))&&(n=a?"/":"."),r?(r.path=n,o(r)):n}function a(e,t){""===e&&(e="."),""===t&&(t=".");var n=i(t),a=i(e);if(a&&(e=a.path||"/"),n&&!n.scheme)return a&&(n.scheme=a.scheme),o(n);if(n||t.match(r))return t;if(a&&!a.host&&!a.path)return a.host=t,o(a);var u="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return a?(a.path=u,o(a)):u}t.urlParse=i,t.urlGenerate=o,t.normalize=s,t.join=a,t.isAbsolute=function(e){return"/"===e.charAt(0)||n.test(e)},t.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var r=e.lastIndexOf("/");if(r<0)return t;if((e=e.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var u=!("__proto__"in Object.create(null));function l(e){return e}function c(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function p(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}t.toSetString=u?l:function(e){return c(e)?"$"+e:e},t.fromSetString=u?l:function(e){return c(e)?e.slice(1):e},t.compareByOriginalPositions=function(e,t,n){var r=p(e.source,t.source);return 0!==r||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)||n||0!=(r=e.generatedColumn-t.generatedColumn)||0!=(r=e.generatedLine-t.generatedLine)?r:p(e.name,t.name)},t.compareByGeneratedPositionsDeflated=function(e,t,n){var r=e.generatedLine-t.generatedLine;return 0!==r||0!=(r=e.generatedColumn-t.generatedColumn)||n||0!==(r=p(e.source,t.source))||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)?r:p(e.name,t.name)},t.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n||0!=(n=e.generatedColumn-t.generatedColumn)||0!==(n=p(e.source,t.source))||0!=(n=e.originalLine-t.originalLine)||0!=(n=e.originalColumn-t.originalColumn)?n:p(e.name,t.name)},t.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},t.computeSourceURL=function(e,t,n){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),n){var r=i(n);if(!r)throw new Error("sourceMapURL could not be parsed");if(r.path){var u=r.path.lastIndexOf("/");u>=0&&(r.path=r.path.substring(0,u+1))}t=a(o(r),t)}return s(t)}},125:(e,t,n)=>{t.SourceMapGenerator=n(433).SourceMapGenerator,t.SourceMapConsumer=n(771).SourceMapConsumer,n(85)},607:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=void 0;const s=o(n(496)),a=n(650);async function u(e){const{WebView:t}=n(425);e.subscriptions.push(s.commands.registerCommand("vide",(()=>{t.createOrShow(e)}))),s.window.registerWebviewPanelSerializer&&s.window.registerWebviewPanelSerializer("vide.editor",{async deserializeWebviewPanel(n){n.webview.options={enableScripts:!0,localResourceRoots:[e.extensionUri]},t.revive(e,n)}})}t.activate=function(e){const t=(0,a.prepare)(e.extensionPath);"boolean"==typeof t?u(e):t.then((()=>{u(e)}))}},650:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.prepare=void 0;const i=r(n(147)),o=r(n(17)),s=n(81);t.prepare=function(e){const t=o.default.join(e,"node_modules");if(i.default.existsSync(t))return!0;const n=(0,s.exec)("npm i",{cwd:e});return new Promise(((e,t)=>{n.on("close",(n=>{0===n?e(!0):t(!1)}))}))}},562:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Service=t.transpileWxml=void 0;const a=s(n(147)),u=s(n(17)),l=o(n(496)),c=s(n(928)),p=s(n(27)),h={textContent:e=>c.default.wxml.stringifyToText(e.text),stringify:e=>{let t="";if(e.logic){const n=Array.isArray(e.logic)?e.logic:[e.logic];for(const e of n)if("wx:for"===e.instruction){const n=e.data.index||"index",r=e.data.it||"item";t+=` wx:for=${c.default.wxml.toAttrString(`{{${e.data.entity}}}`)} wx:for-item='${r}' wx:for-index='${n}'`,e.data.key&&(t+=` wx:key=${c.default.wxml.toAttrString(e.data.key)}`)}else e.data.entity?t+=` ${e.instruction}=${c.default.wxml.toAttrString(`{{${e.data.entity}}}`)}`:t+=` ${e.instruction}`}for(const n in e.events){const r=e.events[n];t+=` bind:${n}=${c.default.wxml.toAttrString(r)}`}for(const[n,r]of Object.entries(e.attrs||{})){const e=":"===n[0]?n.substring(1):n;if(":"===n[0]){t+=` ${e}=${c.default.wxml.toAttrString(r)}`;continue}const i=typeof r;"string"===i?t+=null===r?` ${e}`:` ${e}=${c.default.wxml.toAttrString(r)}`:"object"===i&&Array.isArray(r)?t+=` ${e}=${c.default.wxml.toAttrString(r.join(" "))}`:"boolean"===i?r&&(t+=` ${e}`):t+=null===r?` ${e}`:` ${e}=${c.default.wxml.toAttrString(r)}`}const n="string"==typeof e.classes?[e.classes]:e.classes;if(null==n?void 0:n.length){let e=!1;for(const t of n)Object.hasOwnProperty.call(t,"$")&&(e=!0);if(e){const e=[];for(const t of n)Object.hasOwnProperty.call(t,"$")?e.push(`{{${t.$}}}`):e.push(t);t+=` class=${c.default.wxml.toAttrString(e.join(" ").replace(/\s\s+/g," "))}`}else t+=` class=${c.default.wxml.toAttrString(n.join(" ").replace(/\s\s+/g," "))}`}const r=Object.assign(e.Gstyle||{},e.style||{});return Object.keys(r).length&&(t+=` style='${c.default.css.astToInlinestyle(r)}'`),t}};function f(e){return c.default.html.htmlToAstEx(e,void 0,{parseText:(e,t)=>(e.text=c.default.wxml.parseTextValue(t),!0),parseAttr(e,t,n){const r=t.toLocaleLowerCase(),i=c.default.wxml.parseTextValue(n),o=/{{.*}}/.test(n);return"style"===r?o?(e.attrs||(e.attrs={}),e.attrs[o?`:${t}`:t]=i?c.default.wxml.stringifyToText(i):n):e.style=c.default.css.inlineStyleToAst(n):(e.attrs||(e.attrs={}),e.attrs[o?`:${t}`:t]=i?c.default.wxml.stringifyToText(i):n),!0}}).htmlAst}t.transpileWxml=f,t.Service=class{constructor(e,t,n,r){this.extroot=e,this.workspacePath=t,this.minisrc=n,this.terminal=r}launchService(){if(this.srvpro)throw"Aready launched";const e=p.default.exec(`node ./service.js --root=${this.workspacePath}`,{cwd:this.extroot,async:!0});this.srvpro=e;let t=!1;return new Promise(((n,r)=>{var i;null===(i=e.stdout)||void 0===i||i.on("data",(e=>{if(!t){const r=/\[port=(\d+)\]/.exec(e);r&&(t=!0,n(parseInt(r[1])))}})),e.on("exit",(e=>{this.srvpro=void 0,t||r(0),console.error(`vspage service exit with code[${e}]`)}))}))}dispose(){var e;try{null===(e=this.srvpro)||void 0===e||e.kill(9)}catch(e){console.error(e)}}alert(e){const t="string"==typeof e?e:e.message,n="string"==typeof e?"info":e.type;let r="string"==typeof t?[`[${n.toUpperCase()}] ${t}`]:[];"string"!=typeof t&&(Array.isArray(t)?r=t.map((e=>`[${n.toUpperCase()}] ${e}`)):r.push(`[${n.toUpperCase()}] ${JSON.stringify(t)}`));const i={debug:"[37m",info:"[37m",warning:"[31m",error:"[33m"};this.terminal.fire(i[n]||i.info);for(const e of r)this.terminal.fire(e.replace(/http:\/\/[^:]+:[0-9]+\/project\//gm,"/").replace(/([^\r])\n/gm,"$1\r\n"));this.terminal.fire("[0m\r\n")}patchStyle(e,t,n){const r=u.default.join(this.minisrc,`${e}.wxml`),i=l.window.visibleTextEditors.find((e=>c.default.path.compatible(e.document.uri.path)===r)),o=f(i?i.document.getText():a.default.readFileSync(r,"utf8")),s=c.default.html.query(o,t);if(!s)throw new Error(`cannot find node [${t}]`);const p=s.style||(s.style={});let d=!1;for(const[e,t]of Object.entries(n))!1!==t?Object.hasOwnProperty.call(p,e)?p[e]!==n[e]&&(d=!0,p[e]=t):(d=!0,p[e]=t):Object.hasOwnProperty.call(p,e)&&(delete p[e],d=!0);if(!d)return;const g=c.default.html.astToHtml(o,0,h);i?i.edit((e=>{const t=i.document.lineAt(0),n=i.document.lineAt(i.document.lineCount-1),r=new l.Range(t.range.start,n.range.end);e.replace(r,g)})):a.default.existsSync(r)&&a.default.writeFileSync(r,g,"utf-8")}select(e,t){this.alert(`select [${t}]`)}}},271:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(57));function o(e,t){if(e.selectors){e.selectors=e.selectors.map((e=>e.split(" ").map((e=>"html"===e||"body"===e?e:"page"===e?"html":/^\w/.test(e)&&/^(?!wx-)/.test(e)?`wx-${e}`:e)).join(" ")+(t?`[${t}]`:"")));for(const t of e.declarations||[]){if("declaration"!==t.type)continue;const e=t;if(!e.value)continue;let n=e.value;for(;-1!==n.indexOf("rpx");){const e=n.replace(/calc(\(|(?:\([^)]*[\s-+/*]))(\d+)rpx(\)|(?:[\s-+/*][^)]*\)))/gm,"calc$1var(--devicePixelRatio) * $2px$3");if(e===n)break;n=e}for(;-1!==n.indexOf("rpx");){const e=n.replace(/(^|[\s+/*])(-?\d+)rpx/gm,"$1calc(var(--devicePixelRatio) * $2px)");if(e===n)break;n=e}n!==e.value&&(e.value=n)}}}t.default={inlineStyleToAst(e){e.indexOf("{")>=0&&(e=(e=e.replace(/[{}]/g,"")).replace(/,/g,";"));const t=(e=(e=(e=(e=(e=(e=(e=e.replace(/^[\s\t]+/g,"")).replace(/[\s\t]+;/g,";")).replace(/;[\s\t]+/g,";")).replace(/;[;]+/g,";")).replace(/[\s\t]+:/g,":")).replace(/:[\s\t]+/g,":")).replace(/[\s\t]+$/g,"")).split(";"),n={};for(const e of t){const t=e.split(":");t[0]&&(n[t[0]]=t[1]||!0)}return n},astToInlinestyle(e){let t="";for(const n in e){const r=e[n];n.startsWith(":")?t+=`${n.substring(1)}: {{${r}}}; `:t+=`${n}: ${r}; `}return t.replace(/; $/,";")},wxss(e,t){var n;const r=i.default.parse(e);for(const e of(null===(n=r.stylesheet)||void 0===n?void 0:n.rules)||[])if("rule"===e.type)o(e,t);else if("media"===e.type)for(const n of e.rules||[])"rule"===n.type&&o(n,t);return i.default.stringify(r)}}},402:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.voidElements=void 0;const i=r(n(57)),o=r(n(155)),s=r(n(271));t.voidElements=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]);const a={"~=":(e,t)=>!t||t.indexOf(" ")>-1?0:-1!==` ${e} `.indexOf(` ${t} `),"|=":(e,t)=>-1!==` ${e}`.indexOf(` ${t}-`),"^=":(e,t)=>t&&e.startsWith(t),"$=":(e,t)=>t&&e.endsWith(t),"*=":(e,t)=>t&&-1!==e.indexOf(t),"=":(e,t)=>e===t},u={toAttrString(e){if("string"!=typeof e)return`'${e}'`;const t=!/'/.test(e),n=!/"/.test(e);return t&&n?`'${e}'`:n?`"${e}"`:`'${e.replace(/'/g,"\\")}'`}},l={textContent:e=>e.text,stringify(e){let t="";e.classes&&("string"==typeof e.classes?t=` class='${e.classes}'`:Array.isArray(e.classes)&&(t=` class='${e.classes.join(" ")}'`));for(const n of Object.keys(e.attrs||{})){const r=e.attrs[n];t+="string"==typeof r&&""===r||"boolean"==typeof r&&!0===r||null===r?` ${n}`:` ${n}=${u.toAttrString(r)}`}const n=Object.assign(e.Gstyle||{},e.style||{});return Object.keys(n).length&&(t+=` style='${s.default.astToInlinestyle(n)}'`),t}};t.default={tool:u,emitter:l,cssToInlineStyle(e,t,n={keepVar:!1}){const{htmlAst:r}=this.cssToInlineStyleAst(e,t,n);return this.astToHtml(r)},cssToInlineStyleAst(e,t,n={}){var r;const o=i.default.parse(t),{htmlAst:s,cssVars:a}=this.htmlToAstEx(e,o,n),u=s;for(const e of(null===(r=o.stylesheet)||void 0===r?void 0:r.rules)||[])if("rule"===e.type)for(const t of e.selectors||[]){const n=this.querySelectors(u,t);if(n&&n.length)for(const t of e.declarations){if("declaration"!==t.type)continue;const e=/^var\(/.test(t.value)||/[\s]var\(/.test(t.value),r=e?this.getCssPropertyValue(o,t.value,a):t.value;for(const i of n)e?i.style[t.property]=r:(i.Gstyle||(i.Gstyle={}))[t.property]=r}}return{htmlAst:s,cssVars:a}},querySelectors(e,t,n=!0,r){const i=/^([.#])?([0-9a-z_-]+)(?::([0-9a-z_-]+))?(?:\[([0-9a-z_-]+)(?:([~|^$*]?=)(.+))?\])?([ >~+]\s*[.#]?[0-9a-z_-].*)?$/i.exec(t);if(!i)return;const o={type:i[1],key:i[2],pseudo:i[3],attrKey:i[4],attrOpr:i[5],attrValue:i[6]};if(o.pseudo||!o.key)return[];const s=r||[],u=(e,t)=>{var r,i;let l=!0;if("."===o.type?-1===((null===(r=e.attrs)||void 0===r?void 0:r.class)||"").split(" ").indexOf(o.key)&&(l=!1):"#"===o.type?(null===(i=e.attrs)||void 0===i?void 0:i.id)!==o.key&&(l=!1):e.tag!==o.key&&(l=!1),l&&o.attrKey&&(o.attrValue?a[o.attrOpr](e.attrs[o.attrKey],o.attrValue)||(l=!1):e.attrs.hasOwnProperty(o.attrKey)||(l=!1)),l&&s.push({node:e,parent:t}),n)for(const t of e.children||[])u(t,e)};if(u(e),!i[7])return s.map((e=>e.node));const l=[],c=i[7][0],p=i[7].substring(1);for(const e of s){if(" "===c){this.querySelectors(e.node,p,!0,l);continue}if(">"===c){this.querySelectors(e.node,p,!1,l);continue}if(!e.parent)continue;const t=e.parent.children.indexOf(e.node)+1;if(!(e.parent.children.length<=t))if("+"!==c)for(let n=t;n<e.parent.children.length;n++)this.querySelectors(e.parent.children[n],p,!1,l);else this.querySelectors(e.parent.children[t],p,!1,l)}return l.map((e=>e.node))},getCssPropertyValue:(e,t,n)=>t.replace(/var\((.+)\)/g,((t,r)=>{let i;for(const t of e.stylesheet.rules)if("rule"===t.type&&-1!==t.selectors.indexOf(":root"))for(const e of t.declarations)e.property===r&&(i=e.value);return n&&(n[r]=i),i})),htmlToAstEx(e,n,r={}){let i=e.replace(/<!---CLSTAG-MACRO\(\s*([^)\s]+)\s*\)(---|~~~)>/gi,'<#macro name="$1" test="$2">');i=i.replace(/<!(---|~~~)CLSTAG-MACRO-END\(\s*([^)\s]+)\s*\)--->/gi,"</#macro>");const{parseAttr:a}=r,{parseText:u}=r,l=r.transform||(e=>e),c={},p=[],h={id:0,children:[]};let f=h,d="";if(o.default.parse(i,{openElement:e=>{if(f&&t.voidElements.has(f.tag)){f.selfClose=!0;const e=f;e.endingText=d,d="",f=p.pop(),f.children.push(l(e))}const n="#macro"===e?{tag:e,name:void 0,test:void 0,children:[]}:{tag:e,attrs:{},style:{},children:[],parent:f};p.push(f),f=n,n.leadingText=d,d=""},closeOpenedElement:(e,t,n)=>{if("/>"===t||"?>"===t){f.selfClose=n;const e=f;e.endingText=d,d="",f=p.pop(),f.children.push(l(e))}},closeElement:e=>{if(f&&f.tag!==e&&t.voidElements.has(f.tag)){f.selfClose=!0;const e=f;e.endingText=d,d="",f=p.pop(),f.children.push(l(e))}const n=f;n.endingText=d,d="",f=p.pop(),f.children.push(l(n))},comment:e=>{const t={comment:e,parent:f};t.leadingText=d,d="",f.children.push(l(t))},cdata:e=>{const t={text:e,parent:f};t.leadingText=d,d="",f.children.push(l(t))},attribute:(e,t)=>{if("#macro"===f.tag&&("name"===e?f.name=t:"test"===e&&(f.test=t)),!a||!a(f,e,t))if("style"===e){f.style=s.default.inlineStyleToAst(t);for(const e of Object.keys(f.style)){const t=f.style[e];if((/^var\(/.test(t)||/[\s]var\(/.test(t))&&n){const i=this.getCssPropertyValue(n,t,c);r.keepVar||(f.style[e]=i)}}}else"class"===e?f.classes=t.replace(/\s\s+/," ").split(" "):f.attrs[e]=t},docType:e=>{d="",console.warn("doctype: %s",e)},text:e=>{const t=/^([\s\n]*)([\s\S]*)([\s\n]*)$/.exec(e);if(!t)return;const[,n,r,i]=t;if(r){const e=function(e,t){const n={parent:t};return u&&u(n,e)||(n.text=e),n}(r,f);e.leadingText=n||"",f.children.push(l(e)),d=i||""}else d=n||""}},{attribute:/[~@:a-zA-Z_#][\w:\-.]*/}),f&&f!==h)do{const e=f;e.endingText=d,d="",f=p.pop(),f.children.push(l(e))}while(f!==h);return{htmlAst:h,cssVars:c}},htmlToAst(e){return this.htmlToAstEx(e,null).htmlAst},astToHtml(e,n=0,r=l){const i=(e,n)=>{if(e.text)return(e.leadingText||"")+r.textContent(e);if(e.comment)return`${e.leadingText||""}\x3c!--${e.comment}--\x3e`;if(!e.tag){let t="";for(const r of e.children||[])t+=i(r,n+1);return t}let o="";if(e.hasOwnProperty("leadingText")?o+=e.leadingText:o+=`\n${" ".repeat(2*n)}`,o+=`<${e.tag}`,o+=r.stringify(e),e.selfClose||t.voidElements.has(e.tag))return o+="/>",o;o+=">";let s=!1;for(const t of e.children||[])t.tag&&(s=!0),o+=i(t,n+1);return e.hasOwnProperty("endingText")?o+=e.endingText:s&&(o+=`\n${" ".repeat(2*n)}`),o+=`</${e.tag}>`,o};return i(e,n).replace(/^\n+/,"")},query(e,t){const n=t.split(".").map((e=>parseInt(e)));let r=e;for(const e of n){if(!r.children)return;if(r=r.children[e],!r)return}return r},cssToAst:e=>i.default.parse(e),astToCss:e=>i.default.stringify(e),astScoped(e,t){const n=`scoped-p-${(~~(6*Math.random())).toString(6)}`,r=e=>{e.attrs&&(e.attrs[n]=!0);for(const t of e.children||[])r(t)};r(e);for(const e of t.stylesheet.rules){const t=[];for(const r of e.selectors){const e=/^(.+)(?:(:.+))$/.exec(r)||[];t.push(`${e[1]}[${n}]${e||""}`)}e.selectors=t}}}},928:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(147)),o=r(n(17)),s=r(n(271)),a=r(n(402)),u=r(n(747));t.default={jsonFromFile(e){if(i.default.existsSync(e))return JSON.parse(i.default.readFileSync(e,"utf-8"))},jsonToFile(e,t){i.default.writeFileSync(t,JSON.stringify(e,null,2),"utf-8")},css:s.default,html:a.default,wxml:u.default,path:{compatible:e=>e.replace(/^[\\/]([a-z]+:)/i,"$1").replace(/\\/g,"/"),relative:(e,t)=>o.default.relative(e,t).replace(/^[\\/]([a-z]+:)/i,"$1").replace(/\\/g,"/")},isMatched(e,t){const n=[];for(let r=0;r<=e.length;r++){const e=[];for(let n=0;n<=t.length;n++)e.push(!1);n.push(e)}n[e.length][t.length]=!0;for(let r=t.length-1;r>=0&&"*"===t[r];r--)n[e.length][r]=!0;for(let r=e.length-1;r>=0;r--)for(let i=t.length-1;i>=0;i--)e[r]===t[i]||"?"===t[i]?n[r][i]=n[r+1][i+1]:"*"===t[i]?n[r][i]=n[r+1][i]||n[r][i+1]:n[r][i]=!1;return n[0][0]},isMatchedVx(e,t){for(const n of t)if(this.isMatched(e,n))return!0;return!1}}},747:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseTextValue(e){if(!/{{.*}}/.test(e))return e;const t=[],n=e.replace(/{{(.*?)}}/gm,((e,n)=>(t.push(n),"[#$#$#$#$]"))).split("[#$#$#$#$]");t.reverse();const r=[];for(const e of n)e&&r.push(e),t.length&&r.push({$:t.pop()});return 1===r.length?r[0]:r},parseEsTemplate(e){if(!/\${.*}/.test(e))return e;const t=[],n=e.replace(/\${(.*?)}/gm,((e,n)=>(t.push(n),"[#$#$#$#$]"))).split("[#$#$#$#$]");t.reverse();const r=[];for(const e of n)e&&r.push(e),t.length&&r.push({$:t.pop()});return 1===r.length?r[0]:r},stringifyToText(e){const t=Array.isArray(e)?e:[e];let n="";for(const e of t)n+="string"==typeof e?e:`{{${e.$}}}`;return n},stringifyToAttr(e){const t=this.stringifyToText(e);return this.escapeAttr(t)},toAttrString(e){if("string"!=typeof e)return`'${e}'`;const t=!/'/.test(e),n=!/"/.test(e);return t&&n?`'${e}'`:n?`"${e}"`:`'${e.replace(/'/g,"\\")}'`},toAttrStringWxmlExpr(e){if("string"!=typeof e)return`'{{${e}}}'`;const t=!/'/.test(e),n=!/"/.test(e);return t&&n?`'{{${e}}}'`:n?`"{{${e}}}"`:`'{{${e.replace(/'/g,"\\")}}}'`},escapeAttr(e){e=e.replace(/\n/g,"\\n");const t=!/'/.test(e),n=!/"/.test(e);return t&&n?`'${e}'`:n?`"${e}"`:`'${e.replace(/'/g,"\\")}'`},stringifyToEsTemplate(e){if(Array.isArray(e)){let t="";for(const n of e)t+="string"==typeof n?n:`\${${n.$}}`;return t}return"string"==typeof e?e:e.$||""},stringifyToExpression(e){return Array.isArray(e)?e.map((e=>"string"==typeof e?this.escapeAttr(e):`(${e.$})`)).join("+"):"string"==typeof e?this.escapeAttr(e):e.$||""}}},740:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VsPage=void 0,t.VsPage=class{constructor(e,t){this.webview=e,this.service=t,this.queue=[],this.token=0}dispose(){for(const e of this.queue)clearTimeout(e.timer)}syncAppConfig(e){this.request({method:"syncAppConfig",params:[...arguments]})}setCurrentPage(e,t){this.request({method:"setCurrentPage",params:[...arguments]})}updatePage(e,t){this.request({method:"updatePage",params:[...arguments]})}updateFile(e,t){this.request({method:"updateFile",params:[...arguments]})}select(e){this.request({method:"select",params:[...arguments]})}async onDidReceiveMessage(e){if(e.isrsp){const t=e,n=this.queue.find((e=>e.token===t.token));n?n.resolve(e):console.warn(`request[token=${t.token}] not found`)}else{const t=e,n=this.service[e.method];if(n)try{const e=await n.call(this.service,...t.params);this.response(e,t)}catch(e){console.warn(e.message||e)}else this.response(!0,t)}}response(e,t,n){this.webview.postMessage({isrsp:!0,token:t.token,method:t.method,code:n,data:e})}request(e){e.token=this.token++;const t=Object.assign({},e);return t.timer=setTimeout((e=>{const t=this.queue.find((t=>t.token===e));t&&(t.timer=void 0,t.reject("timeout"))}).bind(this,t.token),5e3),this.queue.push(t),new Promise(((n,r)=>{t.resolve=n,t.reject=r,this.webview.postMessage(e)})).then((e=>(clearTimeout(t.timer),t.timer=void 0,e))).catch((e=>{t.error=e,console.warn(e.message||e)})).finally((()=>{t.timer&&(clearTimeout(t.timer),t.timer=void 0),this.queue.splice(this.queue.indexOf(t),1);const{error:e}=t;if(e)throw e}))}}},425:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebView=void 0;const a=s(n(147)),u=s(n(17)),l=o(n(496)),c=s(n(7)),p=s(n(568)),h=s(n(928)),f=n(740),d=n(562),g=".vspage/config.json";class m{constructor(e,t){this.context=e,this.panel=t,this.disposables=[],this.nonce=function(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}();const n=(l.workspace.workspaceFolders||[])[0];if(!n)throw"illegal project path";this.workspacePath=h.default.path.compatible(n.uri.path),this.projectPath=this.workspacePath,this.exclude=[];const r=u.default.join(this.workspacePath,g);if(a.default.existsSync(r)){const e=JSON.parse(a.default.readFileSync(r,"utf-8"));e.projectRoot&&(this.projectPath=u.default.resolve(this.workspacePath,e.projectRoot)),e.exclude&&(this.exclude=e.exclude)}this.minirootPath=this.projectPath;const i=u.default.join(this.projectPath,"project.config.json");if(a.default.existsSync(i)){const e=JSON.parse(a.default.readFileSync(i,"utf-8"));e.miniprogramRoot&&(this.minirootPath=u.default.resolve(this.projectPath,e.miniprogramRoot))}this.compilerOptions={},this.reloadTsConfig();const o=new l.EventEmitter;this.terminal=l.window.createTerminal({name:"vide",pty:{onDidWrite:o.event,open:()=>{o.fire("[32mVide[0.0.1] extension for vscode.[0m\r\n")},close:()=>{o.fire("[32mBye[0m")}}}),this.terminal.show(!0),this.service=new d.Service(this.context.asAbsolutePath(""),this.workspacePath,this.minirootPath,o),this.vspage=new f.VsPage(this.panel.webview,this.service),this.setup()}static createOrShow(e){const t=l.ViewColumn.Two;if(m.currentPanel)return void m.currentPanel.panel.reveal(t);const n={enableScripts:!0,localResourceRoots:[e.extensionUri]},r=l.window.createWebviewPanel("vide.editor","Vide Editor",l.ViewColumn.Two,Object.assign(n,{retainContextWhenHidden:!0}));m.currentPanel=new m(e,r)}static revive(e,t){m.currentPanel=new m(e,t)}async setup(){const e=await this.service.launchService();await this.setupView(e),await this.setupEvents()}async setupView(e){const{webview:t}=this.panel;this.panel.iconPath={light:l.Uri.parse(this.context.asAbsolutePath("logo.svg")),dark:l.Uri.parse(this.context.asAbsolutePath("logo.svg"))},this.panel.title="VsPage";const n=`http://localhost:${e}`;t.html=`<!DOCTYPE html>\n      <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        \x3c!--\n        <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'strict-dynamic';">\n        --!>\n        <meta http-equiv="Content-Security-Policy" content="default-src 'self'; frame-src vscode-webview: http://localhost:*; style-src 'unsafe-inline' ${t.cspSource}; script-src-elem 'unsafe-inline' localhost:* ${t.cspSource}; script-src 'unsafe-inline' 'strict-dynamic' localhost:* 'nonce-${this.nonce}';">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <style>\n        html, body, #ide {\n          margin: 0 !important;\n          padding: 0 !important;\n          width: 100vw !important;\n          min-width: 100vw !important;\n          min-height: 100vh !important;\n          height: 100vh !important;\n        }\n        ::-webkit-scrollbar{display:none;}\n        </style>\n        <script nonce="${this.nonce}">\n          window.addEventListener('message', event => {\n            if (event.data.toService) {\n              VsCodeApi.postMessage(event.data);\n            } else {\n              ide.contentWindow.postMessage(event.data, '*');\n            }\n          });\n          window.VsCodeApi = acquireVsCodeApi();\n          window.onload = function() {\n            window.ide = document.getElementById('ide');\n          }\n        <\/script>\n      </head>\n      <body>\n        <iframe id=ide seamless="seamless" src="${n}/__ide__/index.html" style="all: unset; border: none;"></iframe>\n      </body>\n      </html>\n     `}async setupEvents(){l.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument.bind(this),null,this.disposables),l.workspace.onDidSaveTextDocument(this.onDidSaveTextDocument.bind(this),null,this.disposables),l.workspace.onDidCloseTextDocument(this.onDidCloseTextDocument.bind(this),null,this.disposables),l.window.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor.bind(this),null,this.disposables),l.window.onDidChangeTextEditorSelection(this.onDidChangeTextEditorSelection.bind(this),null,this.disposables),this.panel.webview.onDidReceiveMessage(this.vspage.onDidReceiveMessage.bind(this.vspage),null,this.disposables),this.panel.onDidDispose((()=>this.dispose()),null,this.disposables)}onDidChangeTextDocument(e){const t=h.default.path.compatible(e.document.uri.path),n=t.split(".").pop();if(!n)return;if(!/^wxml$/i.test(n))return;if(!this.curPage)return;const r=t.replace(/\.json$/,".wxml"),i=h.default.path.relative(this.minirootPath,r).replace(/\.\w+$/,"");if(i!==this.curPagePath)return;const o=e.document.getText();if(this.curPage.wxml===o)return;const s={scoped:(0,p.default)(`/${i}`),wxml:o};this.curPage.wxml=o,this.vspage.updatePage(i,s)}onDidSaveTextDocument(e){const t=h.default.path.compatible(e.uri.path),n=h.default.path.relative(this.projectPath,t),r=h.default.path.relative(this.minirootPath,t);if(!/^\.+\//.test(n))if("tsconfig.json"===n)this.reloadTsConfig();else if(n===g)this.reloadVsPageConfig();else if(/(?<!\.d)\.ts/i.test(n)&&!h.default.isMatchedVx(n,this.exclude)){const n=t.replace(/\.ts$/,".js"),i=c.default.transpileModule(e.getText(),{compilerOptions:{alwaysStrict:!0,inlineSourceMap:!1,target:this.compilerOptions.target||c.default.ScriptTarget.ESNext}});i&&a.default.writeFileSync(n,`/* eslint-disable */\n${i.outputText}`,"utf-8"),this.vspage.updateFile(r,a.default.statSync(t).mtimeMs)}else/(?<!\.d)\.wxss/i.test(n)&&this.vspage.updateFile(r,a.default.statSync(t).mtimeMs)}onDidCloseTextDocument(e){const t=h.default.path.compatible(e.uri.path);h.default.path.relative(this.minirootPath,t).replace(/\.\w+$/,"")===this.curPagePath&&(this.currentEditor=void 0)}onDidChangeActiveTextEditor(e){if(!e)return;const t=h.default.path.compatible(e.document.uri.path),n=h.default.path.relative(this.minirootPath,t).replace(/\.\w+$/,"");if(n!==this.curPagePath&&/\.wxml$/.test(t)){const r=t.replace(/\.wxml$/,"");let i=`${r}.ts`;if(!a.default.existsSync(i)&&(i=`${r}.js`,!a.default.existsSync(i)))throw"not js|ts file found";this.curPage={scoped:(0,p.default)(`/${n}`),wxml:e.document.getText()},this.vspage.setCurrentPage(n,this.curPage),this.currentEditor=e,this.curPagePath=n;try{this.panel.title=u.default.basename(e.document.fileName)}catch(e){}}}onDidChangeTextEditorSelection(e){var t;if(this.currentEditor!==e.textEditor||!(null===(t=e.selections)||void 0===t?void 0:t.length))return;const n=h.default.path.compatible(e.textEditor.document.uri.path),r=n.split(".").pop();if(!r)return;if(!/^wxml$/i.test(r))return;if(h.default.path.relative(this.minirootPath,n).replace(/\.\w+$/,"")!==this.curPagePath)return;function i(e,t){var n;if(!(null===(n=null==e?void 0:e.children)||void 0===n?void 0:n.length))return;const r=e.children.length-1;t.push(r),i(e.children[r],t)}const o=function(e,t,n){const r=function(e,t,n){const r=e.split("\n"),i=r[t];return r.splice(t),r.join("\n")+i.substring(0,n)}(e,t,n),o=[];return i(h.default.html.htmlToAst(r),o),o.join(".")}(e.textEditor.document.getText(),e.selections[0].active.line,e.selections[0].active.character);this.vspage.select(o)}dispose(){this.panel.dispose(),this.terminal.dispose(),this.vspage.dispose(),this.service.dispose(),m.currentPanel=void 0}reloadTsConfig(){const e=u.default.join(this.projectPath,"tsconfig.json");if(a.default.existsSync(e)){const{config:t}=c.default.parseConfigFileTextToJson(e,a.default.readFileSync(e,"utf-8"));t&&(this.compilerOptions=t.compilerOptions||{})}}reloadVsPageConfig(){const e=u.default.join(this.workspacePath,g);if(a.default.existsSync(e)){const t=JSON.parse(a.default.readFileSync(e,"utf-8"));t.projectRoot&&(this.projectPath=h.default.path.compatible(u.default.resolve(this.workspacePath,t.projectRoot))),t.exclude&&(this.exclude=t.exclude)}}}t.WebView=m},27:e=>{"use strict";e.exports=require("shelljs")},7:e=>{"use strict";e.exports=require("typescript")},496:e=>{"use strict";e.exports=require("vscode")},81:e=>{"use strict";e.exports=require("child_process")},147:e=>{"use strict";e.exports=require("fs")},17:e=>{"use strict";e.exports=require("path")},310:e=>{"use strict";e.exports=require("url")},837:e=>{"use strict";e.exports=require("util")}},t={},n=function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(607);module.exports=n})();
//# sourceMappingURL=extension.js.map